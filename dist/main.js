async function a(e){return new Promise(o=>setTimeout(o,e))}async function t(e,o,i,l){l||(l=1e3);const s=()=>i?i.querySelector(o):document.querySelector(o);for(let n=0;n<10;n++){const c=s();if(!c){console.log(`${e} не найдено`),await a(l);continue}return console.log(`${e} найдено`),c}throw new Error(`${e} не найдено`)}async function w(){const e=await t("Заголовок","title");if(console.log(e.innerText),(await t("кнопка подписки","#subscribe-button")).innerText.toLocaleLowerCase()=="подписаться"){console.log("нет подписки");return}const i=await t("dislikeButtonViewModel","dislike-button-view-model");if((await t("кнопка 'не нравится'","button",i)).getAttribute("aria-pressed")=="true"){console.log("дизлайк уже присутствует");return}const s=await t("likeButtonViewModel","like-button-view-model"),n=await t("кнопка 'нравится'","button",s);if(n.getAttribute("aria-pressed")=="true"){console.log("лайк уже присутствует");return}n.click(),console.log("лайк поставлен")}const b=5*1e3;let u=null;const d=new MutationObserver(r);r();d.observe(document.querySelector("title"),{childList:!0});function r(){u!=null&&(clearTimeout(u),u=null),u=setTimeout(w,b)}
