async function a(t){return new Promise(e=>setTimeout(e,t))}async function o(t,e,i,l){l||(l=1e3);const s=()=>i?i.querySelector(e):document.querySelector(e);for(let n=0;n<10;n++){const c=s();if(!c){console.log(`${t} не найдено`),await a(l);continue}return console.log(`${t} найдено`),c}throw new Error(`${t} не найдено`)}async function w(){const t=await o("Заголовок","title");console.log(t.innerText);const e=await o("кнопка подписки","#subscribe-button");if(e.innerText.toLocaleLowerCase()=="подписаться"||e.innerText.toLocaleLowerCase()!=="вы подписаны"&&e.innerText.toLocaleLowerCase()!==""){console.log("нет подписки");return}const i=await o("dislikeButtonViewModel","dislike-button-view-model");if((await o("кнопка 'не нравится'","button",i)).getAttribute("aria-pressed")=="true"){console.log("дизлайк уже присутствует");return}const s=await o("likeButtonViewModel","like-button-view-model"),n=await o("кнопка 'нравится'","button",s);if(n.getAttribute("aria-pressed")=="true"){console.log("лайк уже присутствует");return}n.click(),console.log("лайк поставлен")}const d=5*1e3;let r=null;const b=new MutationObserver(u);u();b.observe(document.querySelector("title"),{childList:!0});function u(){r!=null&&(clearTimeout(r),r=null),r=setTimeout(w,d)}
